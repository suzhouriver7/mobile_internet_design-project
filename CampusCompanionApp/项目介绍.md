# 校园约伴 App 项目介绍

## 项目概述

校园约伴是一款基于uni-app框架开发的移动端应用，旨在为校园用户提供活动约伴、动态分享、AI助手等社交功能。项目采用Vue 3 + Vuex 4技术栈，与Spring Boot后端完全对接，支持Android、iOS、H5等多端运行。

## 核心功能

### 1. 用户认证系统
- **用户登录**：支持邮箱或学号登录
- **用户注册**：邮箱验证码注册
- **忘记密码**：三步流程（验证邮箱 → 输入验证码 → 重置密码）
- **用户信息管理**：编辑资料、修改密码、头像上传

### 2. 活动广场
- **活动列表**：浏览所有活动，支持按类型、校区筛选
- **活动详情**：查看活动详细信息
- **发布活动**：创建新的约伴活动
- **活动申请**：申请加入活动，查看申请状态
- **活动聊天**：与活动参与者实时聊天

### 3. 动态社区
- **动态列表**：浏览所有用户发布的动态
- **动态详情**：查看动态详情和评论
- **发布动态**：发布文字、图片、视频动态
- **评论互动**：对动态进行评论和点赞
- **点赞功能**：支持点赞和取消点赞

### 4. AI助手
- **智能对话**：与AI助手进行对话交流
- **系统提示**：支持自定义系统提示的对话

### 5. 个人中心
- **个人信息**：查看和编辑个人资料
- **我的活动**：查看我发布和参与的活动
- **我的动态**：查看我发布的动态
- **设置功能**：修改密码、退出登录等

## 技术架构

### 前端技术栈
- **框架**：uni-app (Vue 3)
- **状态管理**：Vuex 4
- **时间处理**：dayjs
- **网络请求**：uni.request (封装)
- **UI组件**：uni-app原生组件

### 项目结构
```
CampusCompanionApp/
├── api/                    # API接口层
│   ├── index.js           # API统一导出
│   ├── auth.js            # 认证相关接口
│   ├── user.js            # 用户相关接口
│   ├── order.js           # 订单/活动相关接口
│   ├── content.js         # 动态/内容相关接口
│   ├── file.js            # 文件上传接口
│   ├── ai.js              # AI助手接口
│   └── verify.js          # 验证码接口
├── pages/                  # 页面目录
│   ├── index/             # 首页
│   ├── auth/              # 认证页面（登录、注册、忘记密码）
│   ├── order/             # 活动相关页面
│   ├── content/           # 动态相关页面
│   ├── user/              # 用户相关页面
│   └── ai/                # AI助手页面
├── store/                  # 状态管理
│   ├── index.js           # Store入口
│   └── modules/           # 模块
│       └── user.js        # 用户状态模块
├── utils/                  # 工具函数
│   ├── config.js          # 配置文件（API地址等）
│   ├── request.js         # 网络请求封装
│   ├── util.js            # 通用工具函数
│   └── constants.js       # 常量定义
├── App.vue                 # 应用入口
├── main.js                 # 主入口文件
├── manifest.json           # 应用配置
├── pages.json              # 页面路由配置
└── package.json            # 依赖配置
```

## API对接

### 后端接口地址
- **开发环境**：
  - 夜神模拟器：`http://10.0.2.2:8080/api/v1`
  - 浏览器：`http://localhost:8080/api/v1`
- **生产环境**：可配置

### 主要API接口

#### 认证相关 (`/api/v1/auth`)
- `POST /login` - 用户登录
- `POST /register` - 用户注册
- `POST /logout` - 退出登录
- `POST /forgot-password/verify-email` - 忘记密码步骤1
- `POST /forgot-password/verify-code` - 忘记密码步骤2
- `POST /forgot-password/reset-password` - 忘记密码步骤3

#### 用户相关 (`/api/v1/users`)
- `GET /{userId}` - 获取用户信息
- `PUT /{userId}` - 更新用户信息
- `PUT /{userId}/password` - 修改密码

#### 活动相关 (`/api/v1/orders`)
- `GET /` - 获取活动列表
- `GET /{orderId}` - 获取活动详情
- `POST /` - 发布活动
- `PUT /{orderId}` - 修改活动
- `DELETE /{orderId}` - 删除活动
- `POST /{orderId}/apply` - 申请加入活动
- `GET /{orderId}/applications` - 获取申请列表
- `POST /{orderId}/messages` - 发送活动消息
- `GET /{orderId}/messages` - 获取活动消息

#### 动态相关 (`/api/v1/contents`)
- `GET /` - 获取动态列表
- `GET /{contentId}` - 获取动态详情
- `POST /` - 发布动态
- `PUT /{contentId}` - 修改动态
- `DELETE /{contentId}` - 删除动态
- `POST /{contentId}/comments` - 发布评论
- `GET /{contentId}/comments` - 获取评论列表
- `POST /{contentId}/like` - 点赞/取消点赞
- `GET /{contentId}/likes` - 获取点赞列表

#### AI助手 (`/api/v1/ai`)
- `GET /chat` - 简单对话
- `POST /chat/system` - 系统提示对话

#### 文件上传 (`/api/v1/files`)
- `POST /avatar` - 上传头像

#### 验证码 (`/api/v1/verify`)
- `POST /send-code` - 发送验证码

## 页面说明

### TabBar页面（底部导航）

1. **首页** (`pages/index/index`)
   - 显示推荐活动和热门动态
   - 快速入口：活动广场、动态社区、发布活动、AI助手
   - 支持下拉刷新

2. **活动广场** (`pages/order/list`)
   - 活动列表展示
   - 支持筛选（活动类型、校区）
   - 支持上拉加载更多
   - 浮动按钮快速发布活动

3. **动态社区** (`pages/content/list`)
   - 动态列表展示
   - 支持上拉加载更多
   - 浮动按钮快速发布动态

4. **我的** (`pages/user/info`)
   - 个人信息展示
   - 功能菜单：编辑资料、修改密码、我的活动、我的动态
   - 退出登录

### 功能页面

- **登录页** (`pages/auth/login`) - 用户登录
- **注册页** (`pages/auth/register`) - 用户注册
- **忘记密码** (`pages/auth/forgot-password`) - 三步重置密码
- **发布活动** (`pages/order/create`) - 创建新活动
- **活动详情** (`pages/order/detail`) - 查看活动详情
- **活动聊天** (`pages/order/messages`) - 活动参与者聊天
- **发布动态** (`pages/content/create`) - 发布新动态
- **动态详情** (`pages/content/detail`) - 查看动态详情和评论
- **编辑资料** (`pages/user/edit`) - 编辑个人信息
- **修改密码** (`pages/user/change-password`) - 修改登录密码
- **AI助手** (`pages/ai/chat`) - AI对话界面

## 数据说明

### 活动类型
- BASKETBALL - 篮球
- BADMINTON - 羽毛球
- MEAL - 吃饭
- STUDY - 自习
- MOVIE - 看电影
- RUNNING - 跑步
- GAME - 游戏
- OTHER - 其他

### 校区
- LIANGXIANG - 良乡校区
- ZHONGGUANCUN - 中关村校区
- ZHUHAI - 珠海校区
- XISHAN - 西山校区
- OTHER_CAMPUS - 其他校区

### 活动状态
- PENDING - 待匹配
- IN_PROGRESS - 进行中
- COMPLETED - 已完成
- CANCELLED - 已取消
- EXPIRED - 已过期

## 运行说明

### 开发环境要求
- HBuilderX（推荐最新版本）
- Node.js（用于npm安装依赖）
- 后端服务运行在 `localhost:8080`

### 运行步骤

1. **打开项目**
   - 在HBuilderX中：文件 -> 打开目录 -> 选择 `CampusCompanionApp`

2. **安装依赖**
   ```bash
   npm install
   ```

3. **运行到模拟器**
   - 启动夜神模拟器
   - HBuilderX：运行 -> 运行到手机或模拟器 -> 运行到Android App基座
   - 选择夜神模拟器

4. **运行到浏览器（H5）**
   - HBuilderX：运行 -> 运行到浏览器 -> Chrome

### 配置说明

#### API地址配置
- 默认配置在 `utils/config.js`
- 夜神模拟器：`10.0.2.2:8080`
- 浏览器：`localhost:8080`
- 真机：需要配置电脑实际IP地址

#### 修改API地址
运行时设置：
```javascript
uni.setStorageSync('apiServerIP', '你的IP地址')
```

## 注意事项

1. **后端服务**：确保后端服务已启动并运行在 `localhost:8080`
2. **数据库**：确保数据库已创建并连接成功
3. **网络配置**：
   - 夜神模拟器使用 `10.0.2.2` 访问宿主机
   - 真机需要使用电脑的实际局域网IP
4. **空数据提示**：如果显示"暂无活动"或"暂无动态"，这是正常的，说明数据库中没有数据，可以通过发布功能创建数据

## 功能特点

- ✅ **多端支持**：一套代码，支持Android、iOS、H5
- ✅ **完整功能**：涵盖用户认证、活动管理、动态分享、AI助手等
- ✅ **精美UI**：现代化的界面设计，良好的用户体验
- ✅ **状态管理**：使用Vuex统一管理应用状态
- ✅ **错误处理**：完善的错误处理和用户提示
- ✅ **网络封装**：统一的网络请求封装，支持认证
- ✅ **代码规范**：清晰的代码结构，易于维护

## 开发建议

1. **首次运行**：建议先运行到浏览器（H5），方便调试
2. **网络调试**：查看HBuilderX控制台，可以看到所有网络请求日志
3. **数据测试**：可以通过后端接口或直接在数据库中插入测试数据
4. **功能测试**：按照用户流程测试：注册 -> 登录 -> 发布活动 -> 发布动态

## 项目状态

✅ 项目已完成，所有功能正常运行
✅ 与后端API完全对接
✅ 可在HBuilderX中正常运行
✅ 支持夜神模拟器和浏览器运行

---

**开发团队**：计算机专业四人小组  
**项目名称**：校园约伴系统  
**版本**：1.0.0

